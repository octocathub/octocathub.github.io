(window.webpackJsonp=window.webpackJsonp||[]).push([[150],{571:function(s,a,t){"use strict";t.r(a);var e=t(13),l=Object(e.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"linux设置mysql开机自启动"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#linux设置mysql开机自启动"}},[s._v("#")]),s._v(" linux设置mysql开机自启动")]),s._v(" "),t("h2",{attrs:{id:"mysql启动服务"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#mysql启动服务"}},[s._v("#")]),s._v(" MySQL启动服务")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("service")]),s._v(" mysqld start\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("service")]),s._v(" mysqld restart\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("service")]),s._v(" mysqld stop\n")])])]),t("h2",{attrs:{id:"开机自启动"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#开机自启动"}},[s._v("#")]),s._v(" 开机自启动")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v(" /etc/rc.local\n添加service mysqld start\n")])])]),t("p",[s._v("注意： 如果默认mysql是自启动的，可能和rc.local中的自启动出现乱序之类的问题。")]),s._v(" "),t("p",[s._v("更稳妥的一个解决办法见：")]),s._v(" "),t("h2",{attrs:{id:"centos-7-程序自启动的问题"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#centos-7-程序自启动的问题"}},[s._v("#")]),s._v(" CentOS 7 程序自启动的问题")]),s._v(" "),t("p",[s._v("一、问题现象：")]),s._v(" "),t("p",[s._v("系统重启后，发现mysqld服务启动正常，但是依赖mysql数据库的应用程序A启动失败。")]),s._v(" "),t("p",[s._v("查看日志显示，程序A启动的时候链接数据库失败。")]),s._v(" "),t("p",[s._v("二、原因分析：")]),s._v(" "),t("p",[s._v("mysqld服务是正常启动的。")]),s._v(" "),t("p",[s._v("此时手动重启程序A，A也正常运行。")]),s._v(" "),t("p",[s._v("结论：说明程序A启动的时候，mysqld可能没有启动。")]),s._v(" "),t("p",[s._v("三、启动顺序")]),s._v(" "),t("p",[s._v("首先想到的就是调整mysqld服务的启动顺序，让它高过我的程序A。")]),s._v(" "),t("p",[s._v("然而发现 "),t("code",[s._v("/etc/init.d")]),s._v(" 路径下没有关于mysqld的启动脚本。")]),s._v(" "),t("p",[s._v("四、解决思路")]),s._v(" "),t("p",[s._v("按照链接指示安装的mysqld默认是自动启动的。")]),s._v(" "),t("p",[s._v("可以取消mysqld的自启动，然后写一个启动脚本确保它启动在程序A启动之前。")]),s._v(" "),t("p",[s._v("五、解决办法")]),s._v(" "),t("ol",[t("li",[s._v("查看系统当前默认启动项目的方法，不再是setup之类的了。")])]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("systemctl list-unit-files\n")])])]),t("p",[s._v("执行此命令能查看当前系统的服务启动和服务状态。")]),s._v(" "),t("p",[s._v("结果显示如下：")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\nmicrocode.service       enabled \nmysql.service        enabled \nmysqld.service        enabled \nNetworkManager-dispatcher.service   enabled \n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\n")])])]),t("ol",{attrs:{start:"2"}},[t("li",[s._v("取消mysqld的自启动")])]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("systemctl disable mysqld\n")])])]),t("p",[s._v("执行该命令后再查看当前系统的服务状态：")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\nmicrocode.service       enabled \nmysqld.service        disabled\nNetworkManager-dispatcher.service   enabled \n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\n")])])]),t("ol",{attrs:{start:"3"}},[t("li",[s._v("自定义/etc/rc.local")])]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("先执行systemctl start mysqld\n\n再执行startA\n")])])])])}),[],!1,null,null,null);a.default=l.exports}}]);