(window.webpackJsonp=window.webpackJsonp||[]).push([[113],{528:function(t,a,s){"use strict";s.r(a);var n=s(13),e=Object(n.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"同步时间"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#同步时间"}},[t._v("#")]),t._v(" 同步时间")]),t._v(" "),s("h2",{attrs:{id:"安装ntp"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#安装ntp"}},[t._v("#")]),t._v(" 安装ntp")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("yum -y "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" ntpdate\n")])])]),s("h2",{attrs:{id:"同步时间-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#同步时间-2"}},[t._v("#")]),t._v(" 同步时间")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("ntpdate ntp.aliyun.com\n\nntpdate cn.ntp.org.cn\n")])])]),s("h2",{attrs:{id:"本地搭建ntp服务"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#本地搭建ntp服务"}},[t._v("#")]),t._v(" 本地搭建ntp服务")]),t._v(" "),s("p",[t._v("开启本地ntp服务器,此服务器ip为 "),s("code",[t._v("192.168.188.100")]),t._v(" 。")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("service")]),t._v(" ntpd start\n")])])]),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("vi")]),t._v(" /etc/ntp.conf\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#========权限控制============")]),t._v("\nrestrict default kod nomodify notrap nopeer noquery 拒绝IPV4用户\nrestrict -6 default kod nomodify notrap nopeer noquery 拒绝IPV6用户\nrestrict "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("210.72")]),t._v(".145.44 授权国家授时中心服务器访问本地NTP\nrestrict "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("133.100")]),t._v(".11.8 授权133.100.11.8访问本地NTP\nrestrict "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("127.0")]),t._v(".0.1\nrestrict -6 ::1\nrestrict "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("192.168")]),t._v(".188.2 mask "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("255.255")]),t._v(".255.0 nomodify 本地网段授权访问\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#=========源服务器===========")]),t._v("\nserver cn.ntp.org.cn prefer 指定上级更新时间服务器，优先使用这个地址\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#=========差异分析===========")]),t._v("\ndriftfile /var/lib/ntp/drift\nkeys /etc/ntp/keys\n")])])]),s("p",[t._v("客户端同步时间")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("ntpdate "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("192.168")]),t._v(".188.100\n")])])]),s("p",[t._v("其实，要同步时间，需要一台开启了ntp服务的服务器作为基准服务器，也就是其他的服务器需要找到一个正确的时间来调整自己的时间。\n这种适合不能连接内网的服务器，只有内部网络的服务器来同步服务器。")]),t._v(" "),s("p",[t._v("如果可以访问外网，可以直接使用 "),s("code",[t._v("ntp.aliyun.com")]),t._v(" , "),s("code",[t._v("cn.ntp.org.cn")]),t._v(" 这些公共的基准服务器作为同步服务器。")])])}),[],!1,null,null,null);a.default=e.exports}}]);