(window.webpackJsonp=window.webpackJsonp||[]).push([[31],{398:function(t,a,s){t.exports=s.p+"assets/img/1.419288a6.png"},555:function(t,a,s){"use strict";s.r(a);var e=s(13),n=Object(e.a)({},(function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"tcp"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#tcp"}},[t._v("#")]),t._v(" TCP")]),t._v(" "),e("h2",{attrs:{id:"tcp三次握手"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#tcp三次握手"}},[t._v("#")]),t._v(" tcp三次握手")]),t._v(" "),e("h2",{attrs:{id:"tcp四次挥手"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#tcp四次挥手"}},[t._v("#")]),t._v(" tcp四次挥手")]),t._v(" "),e("h2",{attrs:{id:"tcp协议为什么需要三次握手"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#tcp协议为什么需要三次握手"}},[t._v("#")]),t._v(" TCP协议为什么需要三次握手？")]),t._v(" "),e("ol",[e("li",[t._v("什么是TCP协议？\nTCP：Transmission Control Protocol翻译过来就是传输控制协议，TCP协议是一个面向连接的、可靠的、基于字节流的传输层协议")])]),t._v(" "),e("p",[t._v("RFC 793对TCP连接的定义：")]),t._v(" "),e("div",{staticClass:"language-js extra-class"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[t._v("Connections"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("\nThe reliability and flow control mechanisms described above require that TCPs initialize and maintain certain status information "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" each data stream"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\nThe combination "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("of")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),t._v(" information"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" including sockets"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" sequence numbers"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" and window sizes"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" is called a connection"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\n")])])]),e("p",[t._v("其大致意思是TCP连接是为了用于保证可靠性和流控制机制的，包括 Socket、序列号及窗口大小。")]),t._v(" "),e("p",[t._v("其中Socket是由IP加端口组成的，序列号是用来解决乱序问题的，而窗口大小则是用来做流量控制的。")]),t._v(" "),e("ol",{attrs:{start:"2"}},[e("li",[t._v("TCP协议的特性")])]),t._v(" "),e("ul",[e("li",[t._v("面向连接：是指TCP是通过服务端和客户端进行连接的协议")]),t._v(" "),e("li",[t._v("面向字节流：TCP服务端和客户端之间的数据通讯是通过字节流数据传输的")]),t._v(" "),e("li",[t._v("可靠的：是指TCP服务端客户端之间的数据传输是很稳定的，即使网络很差的情况，TCP都能保证将数据传输到接收方。")])]),t._v(" "),e("blockquote",[e("p",[t._v("ps：TCP传输的可靠性得益于TCP会记录信息的发送状态，哪些数据收到了，哪些数据没收到，TCP都是会记录的，然后哪些丢包的情况，就是发送不成功的情况，TCP会重新发包，所以TCP的可靠性就是这么保证的")])]),t._v(" "),e("ol",{attrs:{start:"3"}},[e("li",[t._v("TCP三次握手执行流程")])]),t._v(" "),e("p",[t._v("TCP的三次握手执行过程是面试中的一个很常见的问题，因为这个问题也是计算机的一个很重要的基础，所以需要认真学习。")]),t._v(" "),e("p",[e("img",{attrs:{src:s(398),alt:""}})]),t._v(" "),e("p",[t._v("关键字说明：")]),t._v(" "),e("ul",[e("li",[t._v("SYN：Synchronize Sequence Numbers，同步序列编号")]),t._v(" "),e("li",[t._v("ACK：Acknowledge Character，确认字符")]),t._v(" "),e("li",[t._v("SEQ：Sequence Number，序列号")])]),t._v(" "),e("p",[t._v("TCP三次握手执行过程：")]),t._v(" "),e("p",[t._v("1、 首先，服务端和客户端都是处于CLOSED状态的，然后服务端启动，监听端口，状态变为LISTEN(监听)状态\n2、客户端为了请求资源，发送连接，发送同步序列号SYN，此时客户端就变成了SYN-SEND状态\n3、服务端接收到客户端请求之后，发送SYN和ACK，然后服务端状态就变成SYN-RCVD状态\n4、客户端接收到信息之后，再次发送ACK，然后变成ESTABLISHED(已确认)状态，服务端接收到返回信息后，状态也变成ESTABLISHED(已确认)状态")]),t._v(" "),e("h2",{attrs:{id:"tcp协议为什么需要三次握手-2"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#tcp协议为什么需要三次握手-2"}},[t._v("#")]),t._v(" TCP协议为什么需要三次握手？")]),t._v(" "),e("p",[t._v("k，知道了TCP的三次握手的基本工作原理之后，就可以解释为什么TCP需要三次握手？为什么不设计成两次握手就可以？")]),t._v(" "),e("p",[t._v("原因：避免重复连接")]),t._v(" "),e("p",[t._v("其实在RFC 793 Transmission Control Protocol里就有指出为什么要三次握手的原因")]),t._v(" "),e("div",{staticClass:"language-js extra-class"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[t._v("The principle reason "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" the three"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("way handshake is to prevent old duplicate connection initiations "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" causing confusion"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\n")])])]),e("p",[t._v("翻译为中文大致意思是主要原因是为了防止旧的重复连接引起连接混乱问题")]),t._v(" "),e("p",[t._v("比如在网络环境比较复杂的情况，客户端可能会连续发送多次请求。如果只设计成两次握手的情况，服务端只能一直接收请求，然后返回请求信息，也不知道客户端是否请求成功。这些过期请求的话就会造成网络连接的混乱。")]),t._v(" "),e("p",[t._v("所以设计成三次握手的情况，客户端在接收到服务端SEQ+1的返回消息之后，就会知道这个连接是历史连接，所以会发送报文给服务端，告诉服务端。")]),t._v(" "),e("p",[t._v("所以TCP设计成三次握手的目的就是为了避免重复连接。")]),t._v(" "),e("p",[t._v("然后可以设计成四次握手？五次握手？不可以？答案是也是可以的，不过为了节省资源，三次握手就可以符合实际情况，所以就没必要设计成四次握手、五次握手等等情况")])])}),[],!1,null,null,null);a.default=n.exports}}]);